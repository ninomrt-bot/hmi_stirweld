{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NinoMarquet-Stirweld/Documents/IHM%202.0%20stirweld/frontend/src/components/Topbar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { User2 } from \"lucide-react\";\r\n\r\nexport function Topbar() {\r\n  const deepBlue = \"#0b1235\";\r\n\r\n  // horloge live (anti-SSR mismatch avec suppressHydrationWarning)\r\n  const [now, setNow] = useState<Date | null>(null);\r\n  useEffect(() => {\r\n    setNow(new Date());\r\n    const id = setInterval(() => setNow(new Date()), 1000);\r\n    return () => clearInterval(id);\r\n  }, []);\r\n\r\n  // Format FR + fuseau Paris\r\n  const timeStr =\r\n    now?.toLocaleTimeString(\"fr-FR\", { hour12: false, timeZone: \"Europe/Paris\" }) ?? \"\";\r\n  const dateStr =\r\n    now?.toLocaleDateString(\"fr-FR\", { timeZone: \"Europe/Paris\" }) ?? \"\";\r\n\r\n  return (\r\n    <header\r\n      style={{\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        background: deepBlue,\r\n        height: 75,\r\n        padding: \"0 16px\",\r\n        color: \"#ffffff\",\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      {/* Logo + version */}\r\n      <div style={{ display: \"flex\", alignItems: \"center\", gap: 12 }}>\r\n        <Link href=\"/\" style={{ display: \"flex\", alignItems: \"center\" }}>\r\n          {/* Place le fichier dans /public/logo-blanc.png */}\r\n          <div\r\n            style={{\r\n              width: 150,\r\n              height: 75,\r\n              position: \"relative\",\r\n            }}\r\n            title=\"Stirweld\"\r\n          >\r\n            <Image\r\n              src=\"/logo-blanc.png\"   \r\n              alt=\"Stirweld\"\r\n              fill\r\n              priority\r\n              sizes=\"150px\"\r\n              style={{ objectFit: \"contain\" }}\r\n              onError={(e) => {\r\n                // fallback simple: masque l'image si introuvable\r\n                (e.target as HTMLImageElement).style.display = \"none\";\r\n              }}\r\n            />\r\n          </div>\r\n        </Link>\r\n        <span style={{ fontWeight: 850, letterSpacing: 0.5 }}>V4 v3.0</span>\r\n      </div>\r\n\r\n      {/* Droite : heure/date + avatar + username */}\r\n      <div style={{ marginLeft: \"auto\", display: \"flex\", alignItems: \"center\", gap: 24 }}>\r\n        <div style={{ textAlign: \"right\", lineHeight: 1.1 }}>\r\n          <div suppressHydrationWarning style={{ fontSize: 28, fontWeight: 900 }}>\r\n            {timeStr}\r\n          </div>\r\n          <div suppressHydrationWarning style={{ fontSize: 22, fontWeight: 900 }}>\r\n            {dateStr}\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ display: \"flex\", alignItems: \"center\", gap: 10 }}>\r\n          <div\r\n            style={{\r\n              width: 56,\r\n              height: 56,\r\n              borderRadius: \"50%\",\r\n              background: \"#ffffff\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              color: deepBlue,\r\n              fontWeight: 800,\r\n            }}\r\n            aria-label=\"User\"\r\n            title=\"Utilisateur\"\r\n          >\r\n            <User2 />\r\n          </div>\r\n          <div style={{ fontWeight: 700, fontSize: 14, marginTop: 2 }}>_SystemUser</div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOO,SAAS;IACd,MAAM,WAAW;IAEjB,iEAAiE;IACjE,MAAM,CAAC,KAAK,OAAO,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC5C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,OAAO,IAAI;QACX,MAAM,KAAK,YAAY,IAAM,OAAO,IAAI,SAAS;QACjD,OAAO,IAAM,cAAc;IAC7B,GAAG,EAAE;IAEL,2BAA2B;IAC3B,MAAM,UACJ,KAAK,mBAAmB,SAAS;QAAE,QAAQ;QAAO,UAAU;IAAe,MAAM;IACnF,MAAM,UACJ,KAAK,mBAAmB,SAAS;QAAE,UAAU;IAAe,MAAM;IAEpE,qBACE,8OAAC;QACC,OAAO;YACL,SAAS;YACT,YAAY;YACZ,YAAY;YACZ,QAAQ;YACR,SAAS;YACT,OAAO;YACP,UAAU;QACZ;;0BAGA,8OAAC;gBAAI,OAAO;oBAAE,SAAS;oBAAQ,YAAY;oBAAU,KAAK;gBAAG;;kCAC3D,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAI,OAAO;4BAAE,SAAS;4BAAQ,YAAY;wBAAS;kCAE5D,cAAA,8OAAC;4BACC,OAAO;gCACL,OAAO;gCACP,QAAQ;gCACR,UAAU;4BACZ;4BACA,OAAM;sCAEN,cAAA,8OAAC,6HAAA,CAAA,UAAK;gCACJ,KAAI;gCACJ,KAAI;gCACJ,IAAI;gCACJ,QAAQ;gCACR,OAAM;gCACN,OAAO;oCAAE,WAAW;gCAAU;gCAC9B,SAAS,CAAC;oCACR,iDAAiD;oCAChD,EAAE,MAAM,CAAsB,KAAK,CAAC,OAAO,GAAG;gCACjD;;;;;;;;;;;;;;;;kCAIN,8OAAC;wBAAK,OAAO;4BAAE,YAAY;4BAAK,eAAe;wBAAI;kCAAG;;;;;;;;;;;;0BAIxD,8OAAC;gBAAI,OAAO;oBAAE,YAAY;oBAAQ,SAAS;oBAAQ,YAAY;oBAAU,KAAK;gBAAG;;kCAC/E,8OAAC;wBAAI,OAAO;4BAAE,WAAW;4BAAS,YAAY;wBAAI;;0CAChD,8OAAC;gCAAI,wBAAwB;gCAAC,OAAO;oCAAE,UAAU;oCAAI,YAAY;gCAAI;0CAClE;;;;;;0CAEH,8OAAC;gCAAI,wBAAwB;gCAAC,OAAO;oCAAE,UAAU;oCAAI,YAAY;gCAAI;0CAClE;;;;;;;;;;;;kCAIL,8OAAC;wBAAI,OAAO;4BAAE,SAAS;4BAAQ,YAAY;4BAAU,KAAK;wBAAG;;0CAC3D,8OAAC;gCACC,OAAO;oCACL,OAAO;oCACP,QAAQ;oCACR,cAAc;oCACd,YAAY;oCACZ,SAAS;oCACT,YAAY;oCACZ,gBAAgB;oCAChB,OAAO;oCACP,YAAY;gCACd;gCACA,cAAW;gCACX,OAAM;0CAEN,cAAA,8OAAC,4MAAA,CAAA,QAAK;;;;;;;;;;0CAER,8OAAC;gCAAI,OAAO;oCAAE,YAAY;oCAAK,UAAU;oCAAI,WAAW;gCAAE;0CAAG;;;;;;;;;;;;;;;;;;;;;;;;AAKvE","debugId":null}},
    {"offset": {"line": 254, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NinoMarquet-Stirweld/Documents/IHM%202.0%20stirweld/frontend/src/components/StatusBar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport Link from \"next/link\";\r\nimport {\r\n  Handshake, Gauge, Bell, LineChart, List, Settings2, RotateCcw, X,\r\n} from \"lucide-react\";\r\n\r\n/* ===== Thème & constantes ===== */\r\nconst COLORS = {\r\n  deepBlue: \"#0f143b\",\r\n  grey: \"#d5d7dd\",\r\n  greyDark: \"#c8cad1\",\r\n  orange: \"#ff6600\",\r\n  textDark: \"#0b1235\",\r\n  fieldBg: \"#f5f6f8\",\r\n};\r\n\r\nconst Z_TOP = 2147483647;\r\nconst STATUS_HEIGHT = 100;\r\nconst MENU_WIDTH = 200;\r\nconst ITEM_HEIGHT = 150;\r\nconst SLANT_OFFSET = 60;\r\n\r\n/* ===== Backend & mapping PLC ===== */\r\nconst API = process.env.NEXT_PUBLIC_BACKEND_URL ?? \"http://localhost:3001\";\r\n\r\n/** Variables affichées dans la barre (ordre F/TT/RS/ZP) */\r\ntype PlcKey = \"F\" | \"TT\" | \"RS\" | \"ZP\";\r\ntype PlcItem = {\r\n  key: PlcKey;\r\n  name: string;\r\n  type: \"REAL\" | \"UDINT\" | \"INT\" | \"BOOL\";\r\n  scale?: number;\r\n  decimals?: number;\r\n  unit: string;\r\n};\r\n\r\nconst PLC_ITEMS: PlcItem[] = [\r\n  { key: \"F\",  name: \"GVL_Public.g_force\",           type: \"REAL\",  scale: 1/1000, decimals: 2, unit: \"kN\"  }, // N -> kN\r\n  { key: \"TT\", name: \"GVL_Public.g_tool_temp\",       type: \"REAL\",  scale: 1,      decimals: 1, unit: \"°C\"  },\r\n  { key: \"RS\", name: \"GVL_Public.g_rotation_speed\",  type: \"UDINT\", scale: 1,      decimals: 0, unit: \"RPM\" },\r\n  { key: \"ZP\", name: \"GVL_Public.g_ZPos\",            type: \"REAL\",  scale: 1,      decimals: 2, unit: \"mm\"  },\r\n];\r\n\r\n/** Statut PLI (équivalent à ton SwitchCase TwinCAT) */\r\nconst PLI_STATUS: Record<number, { label: string; bg: string; fg?: string }> = {\r\n  1:  { label: \"IDLE\",    bg: \"#e5e7eb\", fg: \"#111827\" },\r\n  2:  { label: \"RUNNING\", bg: \"#d1fae5\", fg: \"#065f46\" },\r\n  5:  { label: \"HELD\",    bg: \"#fffbeb\", fg: \"#92400e\" },\r\n  11: { label: \"LOCKED\",  bg: \"#fee2e2\", fg: \"#991b1b\" },\r\n};\r\nconst PLI_DEFAULT = { label: \"UNKNOWN\", bg: \"#f3f4f6\", fg: \"#374151\" };\r\n\r\n/* ===== Utils ===== */\r\nfunction useMounted() {\r\n  const [m, setM] = useState(false);\r\n  useEffect(() => setM(true), []);\r\n  return m;\r\n}\r\nfunction Portal({ children }: { children: React.ReactNode }) {\r\n  if (typeof window === \"undefined\") return null;\r\n  return createPortal(children, document.body);\r\n}\r\nfunction useBodyScrollLock(locked: boolean) {\r\n  useEffect(() => {\r\n    if (typeof document === \"undefined\") return;\r\n    const prev = document.body.style.overflow;\r\n    document.body.style.overflow = locked ? \"hidden\" : prev || \"\";\r\n    return () => { document.body.style.overflow = prev; };\r\n  }, [locked]);\r\n}\r\nconst fmt = (v: number | null | undefined, d = 1) =>\r\n  v == null || Number.isNaN(v) ? \"—\" : v.toFixed(d);\r\n\r\n/* ===== Composant ===== */\r\nexport type StatusBarProps = {\r\n  headerHeight?: number;\r\n  title?: string;\r\n};\r\n\r\nexport default function StatusBar({\r\n  headerHeight = 64,\r\n  title = \"Textblock\",\r\n}: StatusBarProps) {\r\n  const [open, setOpen] = useState(false);\r\n  const mounted = useMounted();\r\n  useBodyScrollLock(open);\r\n\r\n  // valeurs live affichées\r\n  const [vals, setVals] = useState<Record<PlcKey, number | null>>({\r\n    F: null, TT: null, RS: null, ZP: null,\r\n  });\r\n  const [online, setOnline] = useState<boolean>(false);\r\n  const [pliStatus, setPliStatus] = useState<number | null>(null);\r\n\r\n  // ===== REFRESH: read-many puis fallback read-one =====\r\n  const doRefresh = useCallback(async () => {\r\n    // 1) read-many\r\n    try {\r\n      const body = {\r\n        items: [\r\n          { name: \"GVL_Public.g_force\",          type: \"REAL\"  },\r\n          { name: \"GVL_Public.g_tool_temp\",      type: \"REAL\"  },\r\n          { name: \"GVL_Public.g_rotation_speed\", type: \"UDINT\" },\r\n          { name: \"GVL_Public.g_ZPos\",           type: \"REAL\"  },\r\n          { name: \"MAIN.PLI.Status\",             type: \"INT\"   },\r\n        ],\r\n      };\r\n      const r = await fetch(`${API}/api/read-many`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        cache: \"no-store\",\r\n        body: JSON.stringify(body),\r\n      });\r\n      if (!r.ok) throw new Error(`read-many HTTP ${r.status}`);\r\n      const data = await r.json();\r\n\r\n      const get = (name: string) =>\r\n        Number(data?.results?.find((x: any) => x?.name === name)?.value);\r\n\r\n      const f  = get(\"GVL_Public.g_force\");\r\n      const tt = get(\"GVL_Public.g_tool_temp\");\r\n      const rs = get(\"GVL_Public.g_rotation_speed\");\r\n      const zp = get(\"GVL_Public.g_ZPos\");\r\n      const st = get(\"MAIN.PLI.Status\");\r\n\r\n      setVals({\r\n        F:  Number.isFinite(f)  ? f / 1000 : null, // N -> kN\r\n        TT: Number.isFinite(tt) ? tt       : null,\r\n        RS: Number.isFinite(rs) ? rs       : null,\r\n        ZP: Number.isFinite(zp) ? zp       : null,\r\n      });\r\n      setPliStatus(Number.isFinite(st) ? st : null);\r\n      setOnline(true);\r\n      return;\r\n    } catch {\r\n      // passe au fallback\r\n    }\r\n\r\n    // 2) fallback: lectures individuelles\r\n    try {\r\n      const readOne = async (name: string, type: string) => {\r\n        const u = `${API}/api/read?name=${encodeURIComponent(name)}&type=${encodeURIComponent(type)}`;\r\n        const r = await fetch(u, { cache: \"no-store\" });\r\n        if (!r.ok) throw new Error(`read ${name} HTTP ${r.status}`);\r\n        const d = await r.json();\r\n        return Number(d?.value);\r\n      };\r\n\r\n      const [f, tt, rs, zp, st] = await Promise.all([\r\n        readOne(\"GVL_Public.g_force\",          \"REAL\"),\r\n        readOne(\"GVL_Public.g_tool_temp\",      \"REAL\"),\r\n        readOne(\"GVL_Public.g_rotation_speed\", \"UDINT\"),\r\n        readOne(\"GVL_Public.g_ZPos\",           \"REAL\"),\r\n        readOne(\"MAIN.PLI.Status\",             \"INT\"),\r\n      ]);\r\n\r\n      setVals({\r\n        F:  Number.isFinite(f)  ? f / 1000 : null,\r\n        TT: Number.isFinite(tt) ? tt       : null,\r\n        RS: Number.isFinite(rs) ? rs       : null,\r\n        ZP: Number.isFinite(zp) ? zp       : null,\r\n      });\r\n      setPliStatus(Number.isFinite(st) ? st : null);\r\n      setOnline(true);\r\n    } catch {\r\n      setOnline(false);\r\n    }\r\n  }, []);\r\n\r\n  // ===== Polling: 200ms (visible) / 1000ms (onglet caché) =====\r\n  useEffect(() => {\r\n    let stop = false;\r\n    let t: ReturnType<typeof setTimeout> | null = null;\r\n    const tick = async () => {\r\n      try { await doRefresh(); } catch { setOnline(false); }\r\n      if (!stop) t = setTimeout(tick, document.hidden ? 1000 : 200);\r\n    };\r\n    tick();\r\n    return () => { stop = true; if (t) clearTimeout(t); };\r\n  }, [doRefresh]);\r\n\r\n  // ===== ESC pour fermer le menu =====\r\n  useEffect(() => {\r\n    const onKey = (e: KeyboardEvent) => e.key === \"Escape\" && setOpen(false);\r\n    window.addEventListener(\"keydown\", onKey);\r\n    return () => window.removeEventListener(\"keydown\", onKey);\r\n  }, []);\r\n\r\n  const toggle = useCallback(() => setOpen(v => !v), []);\r\n  const firstLinkRef = useRef<HTMLAnchorElement | null>(null);\r\n  useEffect(() => {\r\n    if (open) {\r\n      const t = setTimeout(() => firstLinkRef.current?.focus(), 0);\r\n      return () => clearTimeout(t);\r\n    }\r\n  }, [open]);\r\n\r\n  // rendu des 4 champs dans l'ordre F/TT/RS/ZP\r\n  const fields = useMemo(() => {\r\n    const map: Record<PlcKey, { value: number | null; unit: string; decimals: number }> = {\r\n      F:  { value: vals.F,  unit: \"kN\",  decimals: 2 },\r\n      TT: { value: vals.TT, unit: \"°C\", decimals: 1 },\r\n      RS: { value: vals.RS, unit: \"RPM\", decimals: 0 },\r\n      ZP: { value: vals.ZP, unit: \"mm\", decimals: 2 },\r\n    };\r\n    return [\r\n      [\"F\",  map.F.unit,  fmt(map.F.value,  map.F.decimals)],\r\n      [\"TT\", map.TT.unit, fmt(map.TT.value, map.TT.decimals)],\r\n      [\"RS\", map.RS.unit, fmt(map.RS.value, map.RS.decimals)],\r\n      [\"ZP\", map.ZP.unit, fmt(map.ZP.value, map.ZP.decimals)],\r\n    ] as const;\r\n  }, [vals]);\r\n\r\n  return (\r\n    <div style={{ position: \"relative\", zIndex: 0 }}>\r\n      {/* ===== Barre de statut ===== */}\r\n      <div\r\n        style={{\r\n          height: STATUS_HEIGHT,\r\n          background: COLORS.grey,\r\n          color: COLORS.textDark,\r\n          position: \"relative\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          borderTop: `1px solid ${COLORS.greyDark}`,\r\n          overflow: \"hidden\",\r\n        }}\r\n      >\r\n        {/* Trapèze bleu */}\r\n        <div\r\n          aria-hidden\r\n          style={{\r\n            position: \"absolute\",\r\n            left: 0,\r\n            top: 0,\r\n            width: MENU_WIDTH + 60,\r\n            height: STATUS_HEIGHT,\r\n            background: COLORS.deepBlue,\r\n            clipPath: `polygon(0 0, 100% 0, calc(100% - ${SLANT_OFFSET}px) 100%, 0 100%)`,\r\n            pointerEvents: \"none\",\r\n          }}\r\n        />\r\n\r\n        {/* Burger */}\r\n        <button\r\n          onClick={toggle}\r\n          aria-label=\"Open menu\"\r\n          style={{\r\n            position: \"absolute\",\r\n            left: 40,\r\n            top: (STATUS_HEIGHT - 12 * 3 - 8 * 2) / 2,\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            gap: 10,\r\n            cursor: \"pointer\",\r\n            zIndex: Z_TOP,\r\n            background: \"transparent\",\r\n            border: \"none\",\r\n            padding: 0,\r\n          }}\r\n        >\r\n          {[0, 1, 2].map(i => (\r\n            <span\r\n              key={i}\r\n              style={{\r\n                width: 125,\r\n                height: 8,\r\n                background: COLORS.orange,\r\n                borderRadius: 2,\r\n                display: \"block\",\r\n              }}\r\n            />\r\n          ))}\r\n        </button>\r\n\r\n        {/* Online/Offline + Titre + Pavé statut PLI */}\r\n        <div\r\n          style={{\r\n            paddingLeft: MENU_WIDTH + 16,\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: 8,\r\n          }}\r\n        >\r\n          <div style={{ padding: \"0 24px\", fontSize: 18, fontWeight: 700, color: online ? \"#10b981\" : \"#ef4444\" }}>\r\n            {online ? \"Online\" : \"Offline\"}\r\n          </div>\r\n\r\n            <div style={{ padding: \"0 24px\", fontSize: 36, fontWeight: 800 }}>\r\n            {(pliStatus != null ? (PLI_STATUS[pliStatus]?.label ?? \"UNKNOWN\") : \"UNKNOWN\")}\r\n            </div>\r\n\r\n\r\n        \r\n        </div>\r\n\r\n        {/* Champs valeurs (F / TT / RS / ZP) */}\r\n        {fields.map(([label, unit, text], idx) => (\r\n          <div\r\n            key={label}\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              gap: 10,\r\n              padding: \"0 24px\",\r\n              borderLeft: `1px solid ${COLORS.greyDark}`,\r\n              marginLeft: idx === 0 ? 16 : 0,\r\n            }}\r\n          >\r\n            <span style={{ fontSize: 14, fontWeight: 700 }}>{label}</span>\r\n            <div\r\n              style={{\r\n                width: 140,\r\n                height: 40,\r\n                background: COLORS.fieldBg,\r\n                border: `1px solid ${COLORS.greyDark}`,\r\n                borderRadius: 4,\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"flex-end\",\r\n                padding: \"0 12px\",\r\n                fontSize: 20,\r\n                fontWeight: 800,\r\n                color: COLORS.textDark,\r\n              }}\r\n              title={`${label} ${unit}`}\r\n            >\r\n              {text}\r\n            </div>\r\n            <span style={{ fontSize: 14, fontWeight: 700 }}>{unit}</span>\r\n          </div>\r\n        ))}\r\n\r\n        {/* Refresh manuel */}\r\n        <div style={{ marginLeft: \"auto\", paddingRight: 24 }}>\r\n          <button\r\n            aria-label=\"Refresh\"\r\n            onClick={() => void doRefresh().catch(()=>{})}\r\n            style={{\r\n              width: 56,\r\n              height: 56,\r\n              borderRadius: \"50%\",\r\n              background: COLORS.deepBlue,\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              border: \"none\",\r\n              cursor: \"pointer\",\r\n            }}\r\n            title=\"Rafraîchir maintenant\"\r\n          >\r\n            <RotateCcw style={{ color: \"white\" }} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ===== Menu latéral ===== */}\r\n      {mounted && open && (\r\n        <Portal>\r\n          {/* Backdrop */}\r\n          <div\r\n            onClick={() => setOpen(false)}\r\n            aria-hidden\r\n            style={{\r\n              position: \"fixed\",\r\n              inset: 0,\r\n              background: \"rgba(0,0,0,0.001)\",\r\n              zIndex: Z_TOP - 1,\r\n            }}\r\n          />\r\n\r\n          {/* Aside aligné à la barre */}\r\n          <aside\r\n            role=\"dialog\"\r\n            aria-label=\"Navigation\"\r\n            style={{\r\n              position: \"fixed\",\r\n              top: headerHeight + STATUS_HEIGHT,\r\n              left: 0,\r\n              bottom: 0,\r\n              width: MENU_WIDTH,\r\n              background: COLORS.deepBlue,\r\n              zIndex: Z_TOP,\r\n              boxShadow: \"0 6px 24px rgba(0,0,0,0.35)\",\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              borderRight: \"4px solid rgba(0,0,0,0.15)\",\r\n            }}\r\n          >\r\n            <nav\r\n              style={{\r\n                flex: 1,\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                overflow: \"hidden\",\r\n                padding: \"4px 0 8px 0\",\r\n              }}\r\n            >\r\n              {[\r\n                { href: \"/control\", icon: Handshake, label: \"CONTROL\" },\r\n                { href: \"/dashboard\", icon: Gauge, label: \"DASHBOARD\" },\r\n                { href: \"/events\", icon: Bell, label: \"EVENTS\" },\r\n                { href: \"/data\", icon: LineChart, label: \"DATA\" },\r\n                { href: \"/recipe\", icon: List, label: \"RECIPE\" },\r\n                { href: \"/settings\", icon: Settings2, label: \"SETTINGS\" },\r\n              ].map((item, idx) => {\r\n                const Icon = item.icon;\r\n                const isFirst = idx === 0;\r\n                return (\r\n                  <Link\r\n                    ref={isFirst ? firstLinkRef : undefined}\r\n                    key={item.href}\r\n                    href={item.href}\r\n                    aria-label={item.label}\r\n                    onClick={() => setOpen(false)}\r\n                    style={{\r\n                      position: \"relative\",\r\n                      textDecoration: \"none\",\r\n                      color: \"#fff\",\r\n                      height: ITEM_HEIGHT,\r\n                      display: \"grid\",\r\n                      placeItems: \"center\",\r\n                      outline: \"none\",\r\n                    }}\r\n                  >\r\n                    {idx > 0 && (\r\n                      <div\r\n                        style={{\r\n                          position: \"absolute\",\r\n                          top: 0,\r\n                          left: 16,\r\n                          right: 16,\r\n                          height: 1,\r\n                          background: \"rgba(255,255,255,0.25)\",\r\n                        }}\r\n                      />\r\n                    )}\r\n                    <div\r\n                      style={{\r\n                        width: \"100%\",\r\n                        height: \"100%\",\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"center\",\r\n                      }}\r\n                    >\r\n                      <Icon size={60} color=\"#FFFFFF\" />\r\n                    </div>\r\n                  </Link>\r\n                );\r\n              })}\r\n            </nav>\r\n\r\n            <div\r\n              style={{\r\n                padding: \"8px 12px 12px 12px\",\r\n                display: \"flex\",\r\n                justifyContent: \"flex-end\",\r\n              }}\r\n            >\r\n              <button\r\n                onClick={() => setOpen(false)}\r\n                aria-label=\"Close menu\"\r\n                style={{ background: \"transparent\", border: \"none\", cursor: \"pointer\", padding: 8 }}\r\n              >\r\n                <X color=\"#fff\" />\r\n              </button>\r\n            </div>\r\n          </aside>\r\n        </Portal>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}